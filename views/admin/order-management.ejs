<%- include('../adminlayout/header.ejs') %>
  <%- include('../adminlayout/sidebar.ejs') %>
    <%- include('../adminlayout/navbar.ejs') %>
    <div class="col-lg-12 grid-margin stretch-card pt-5">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title pt-3">Product List</h4>
            <div class="table-responsive">
              <table class="table table-dark">
                <thead>
                  <tr>
                    <th>Product Images</th>
                    <th>User Name</th>
                    <th>Date</th>
                    <th>Total Price</th>
                    <th>Order Id</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <% order.forEach((orderItem) => { %>
                    <tr>
                      <td>
                        <% orderItem.products.forEach((productItem) => { %>
                          <% const product = productItem.productid; %>
                          <% if (product && product.image && product.image[0]) { %>
                            <img style="width: 50px; height: 50px" src="/adminAssets/adminImages/<%= product.image[0] %>" alt="No image">
                          <% } %>
                        <% }) %>
                      </td>
                      <td><%= orderItem.userName %></td>
                      <td><%= orderItem.date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: '2-digit' }).replace(/\//g,'-') %></td>
                      <td><%= orderItem.totalAmount %></td>
                      <td><%= orderItem._id %></td>
                      <td>
                        <a href="/single-order-detail/<%= orderItem._id %>"><button class="btn btn-outline-success">Details</button></a>
                      </td>
                    </tr>
                  <% }) %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      

                </thead>
              </table>
            </div>
          </div>
        </div>
      </div>









<%- include('../adminlayout/footer.ejs') %>
